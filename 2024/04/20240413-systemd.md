---
layout: post
title: "systemctlはforkingにすると見た目上早くなる"
tags:
  - windows
date: 2024/04/13
---

タイトルにやる気が感じられないが、まあよかろう。  
  
[前回](20240407-wsl.md)、WSL2はファイルシステムへの遅いんじゃなかろうかという心配をして、よくわからないがものすごく遅いというわけでもないだろうということになった。  
いま遅いと思っているのは`systemctl start`で立ち上げたときになかなか制御がコンソールに戻ってこないアプリがあるからだった。ファイルシステムを起動時に激しくアクセスするからそのせいだと推測していたのだが、そうじゃなかったらserviceファイルの書き方に原因がありそうだ。  
  
serviceファイルはそのアプリのサンプルをそのまま使っていた。よく読んでいなかったのだが使ったことが無い `Type=notify` という記述があった。  

* [systemd サービスタイプ - ArchWiki](https://wiki.archlinux.jp/index.php/Systemd#.E3.82.B5.E3.83.BC.E3.83.93.E3.82.B9.E3.82.BF.E3.82.A4.E3.83.97)

基本は `simple` ということね。  
ということは `forking` にしておけば別プロセスになるからコマンドラインへすぐに戻ってきて、見た目上は早くなるんじゃなかろうか。  
やってみると、比較的すぐ制御が戻ってきた。「それでいいのか！」と思われそうだが、人は見た目が何割みたいな話があるじゃないか、それだよ。
