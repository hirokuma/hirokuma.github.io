---
layout: post
title: "curlの--jsonオプション"
tags:
  - other
create: "2026/02/12"
date: "2026/02/12"
---

[前回](./20260211-other.md)のJSONを試すのに `curl` を使った。  
あれは GET でやっていたからそれで済んだが、私が使っているのは POST だった。  
JSONRPCっぽくしていたのでbody部分にJSONを書かないと動かないのだが、content-typeなどを書くのも面倒だ(前回程度なら `-XPOST` で済むが)。

`curl` には `--json` オプションがあるじゃないか、というところまでは覚えていたのだが使い方を覚えていなかった。

* [JSON - everything curl](https://everything.curl.dev/http/post/json.html)

## その1: JSONデータそのまま

`--json` に続けてJSONデータをそのまま載せるパターン。  
シングルクォーテーションで囲まないとうまくいかなさそうな気がする。

```bash
curl --json '{"tool": "curl"}' https://example.com/
```

## その2: ファイル

`@` に続けてJSONデータの入ったファイルを与えるパターン。

```bash
curl --json @json.txt https://example.com/
```

## その3: stdoutをパイプ

stdout をパイプと言うか、stdin にパイプというか、とにかくそんなパターン。

```bash
echo '{"a":"b"}' | curl --json @- https://example.com/
```

## おまけ: ヒアドキュメント

JSONが複雑になってきたらヒアドキュメントを使うのもよいだろう。

```shell
$ curl --json @- https://example.com/ <<EOS
{"a": "b"}
EOS
```

```shell
$ cat<<EOS | curl --json @- https://example.com/
{"a": "b"}
EOS
```
