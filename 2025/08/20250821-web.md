---
layout: post
title: "web: jekyll-sitemapだとlastmodがいつも変わる"
tags:
  - web
date: "2025/08/21"
last_modified_at: "2025-08-21T16:20:00+09:00"
---

sitemap.xml の作成を GitHub Pages で使用できる jekyll-sitemap を使ったり、
ローカルでスクリプトを作って作成したりしていた。

今は jekyll-sitemap で作ってもらい、ときどきダウンロードしてリネームしている。
なんでかというと、なぜか Google Search Console で `sitemap.xml` を読み取ってくれないからだ。  
`my-sitemap.xml` のように名前が違えば読んでくれる。

さっき気付いたのだが、全部の記事の `<lastmod>` が同じ日時になっていた。  
[jekyll-sitemapのlastmod](https://github.com/jekyll/jekyll-sitemap/blob/99148a2255a2b3a8d2b31ba8216945262981b12c/README.md#lastmod-tag)の仕様からすると、

1. `jekyll-last-modified-at` を使っていればそれを
2. `last_modified_at` があればそれを
3. `post.date` があればそれを

ということになっている。

`post.date` は付けているのだが、日本フォーマットで日付しかないから無視されているのだろうか？  
いや、タイムゾーンまで付けてみたが関係なかった。

`_config.yml` に sitemap を作らない設定を追加すると GitHub Actions が終わらないし、
やっぱりローカルで作るスクリプトを作るべきか。
