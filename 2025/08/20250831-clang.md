---
layout: post
title: "clang: %zu ??"
tags:
  - clang
date: "2025/08/31"
---

久しぶりに C言語でコードを書いたので、vscode にインストールしている Gemini Code Assist にレビューしてもらった。

いろいろ、いろいろ言われるのは仕方ない。  
それはよいのだが、`size_t` の値をログに出すのに `%ld` を使っていたのだが指摘されていた。  
`%zu` っすよ、と。  
`unsigned` にしてなかったのは私のうっかりだが、 `%z` は初めて聞いた。

* [printf() > size_t型の書式指定子 > %zu #C - Qiita](https://qiita.com/7of9/items/ca5ebf9b7861acbcf656)

C99 からなんだ。  
オライリーの「Cクイックリファレンス」にもよく見ると載っていた。

### Gemini Code Assist

今のところ Gemini Code Assist が無料で使えているので、
コードを書いている最中は GitHub Copilot をオフにしている。  
減るからね！

「コードレビューしてください。」と依頼しているのだが、
初回はよかったものの、何度か修正してレビュー依頼、とやっていると
現状と違うレビュー内容になっていて混乱することがあった
(レビュー中に修正はしていない)。  
GitHub に push しているコードだったのでそっちを見ているのかと確認したが、
そういうことではなく単に「ごめん」ってことだった。  
再レビューよりも新しくチャットを開いてレビューしてもらった方が良かったのだろうか。

あと、別ファイルではなく現在のファイルに直接を加えて、Reject してもファイルを編集したマークがついているので精神的によろしくない(保存すると差分がなかったので元に戻っているようだが)。  
GitHub Copilot は淡々と指摘するだけなので好感度が上がった。
