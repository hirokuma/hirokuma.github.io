---
layout: post
title: "git hooksはローカルのみ"
tags:
  - other
date: "2025/12/20"
---

Github Actions の無料範囲が狭くなるそうだ。
個人でやってる分はパブリックリポジトリにしているからよいのだが、
お仕事でまだ自分だけで作業している分についてはプライベートリポジトリにしている。

完全な代わりにはならないが、git hooks を使うと近いようなことはできる。  
git の何かの操作をトリガにしてスクリプトを実行する機能だ。
`.git/hooks/*` にサンプルスクリプトがある。ファイル名とトリガが一致している。

でこの hooks だが、`.git/` の下に置くことから分かるようにリポジトリに入るわけではない。
ローカルでしか持てないし、git リポジトリで共有するものではないということだ。  
擬似的に共有する方法として、スクリプトは git リポジトリに格納しておき、
`.gitconifg` の `core.hooksPath` にそれぞれの gitリポジトリの特定のディレクトリの中に該当するスクリプトがあれば実行するというようなスクリプトを指すようにしておく。  
そうすることで擬似的に git hooks のスクリプトを共有するそうだ。
[Husky](https://typicode.github.io/husky/) のようなものもそういう感じらしい。

* [githooks - Can Git hook scripts be managed along with the repository? - Stack Overflow](https://stackoverflow.com/questions/427207/can-git-hook-scripts-be-managed-along-with-the-repository)

自作でそういうことをやっている人も多い。
あまり他のしくみを持ち込みたくないという気持ちは良くわかる。

いまは Rust の勉強中なので `cargo` で何かできないか質問した。  
やるとしたら `cargo-push` みたいなスクリプトを作って `cargo push` を実行してビルドとテストと push をやるとかだろうか。

* [ChatGPT](https://chatgpt.com/share/694665c8-ee68-8010-b047-c7e92e36c4a2)

`Makefile` でもよいのだけどね。
未だに文法を覚えられないのだが、こういうのは AI に任せても良いし過去の資産もいろいろあるので困りはしないだろう。  
CMake はなんかこう私にあわない気がする。覚えられないだけかもしれないが。
それに、C/C++ 以外で CMake を使うのはなんとなく避けたい気持ちがある。
