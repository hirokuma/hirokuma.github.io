---
layout: post
title: "rust: rust-bitcoin と BDK"
tags:
  - rust
  - bitcoin
date: "2025/09/16"
---

C言語 + [libwally-core](https://github.com/ElementsProject/libwally-core) でやってきたが、
そろそろ勉強も兼ねて Rust言語でやるのもよいだろう。  
単体テストが進まず疲れてきたというのが主な要因だが、1ヶ月くらい Rust 勉強をサボっているから何でもよいのだ。

## rust-bitcoin と BDK

もちろん一から作るつもりはないのでライブラリを使うのだが、何を使うのがよいだろうか。  
確か最初に rust-bitcoin が出てきて、その後に BDK が出てきたような気がする。
[BDK の organization](https://github.com/bitcoindevkit)にも "BDK is based on the powerful rust-bitcoin and rust-miniscript libraries." と書いてあるし。

ということは、BDK を使えば自然と rust-bitcoin を使うことになるのか。

* [rust-bitcoin](https://github.com/rust-bitcoin/rust-bitcoin)
* [BDK](https://github.com/bitcoindevkit/bdk)

rust-bitcoin の [README](https://github.com/rust-bitcoin/rust-bitcoin/blob/3722e2557a0ddeb711698891524080a76842f38e/README.md#consensus)には
コンセンサスを検証するコードには使わないでおくれ、ということが書いてあった。  
これは出来が良いとか悪いとかではなく、Bitcoin Core は C++ で書かれていてコードレベルではなくバイナリレベルではどうしても違いがあって
そこに起因する何かが絶対にないとは保証できないから、という感じだった。  
繊細な話だ。

## rust-bitcoin にしてみよう

BDK のベースになるくらいだし、rust-bitcoin を触ってから考えることにした。

* [Introduction - Rust Bitcoin Cookbook](https://rust-bitcoin.org/book/intro.html)

目次が潔くていいね。
トランザクション作成と署名に絞ってあるし、PSBT もあるので十分だろう。

今日は遅くなったので明日からやろう。
