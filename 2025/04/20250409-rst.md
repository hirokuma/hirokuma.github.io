# rust: Rustがんばろう 11日目

_2025/04/09_

## はじめに

勉強し続けていれば急にわかった気持ちになる日がやってくる、そう信じて続ける Rust勉強である。  
日常使いするところまで持ってこないとテクニックどうとかよりも記憶から消えてしまうのよね。  
C言語だと数年ぶりであっても何とかなっている(たぶん)ので、若い頃の記憶が消えていないだけかもしれない。

組み込み開発だとほぼ C言語しか使わないので、業務歴＝C言語歴になる。  
他の言語をやるよりもハードウェア関係の方を重視したので、私の今の状況は受け入れざるを得ないのだ。
まあ、それで仕事になっていたのでよかったのだよ、きっと。

ただちょっとした弊害として、長いことやっていない言語で開発するのが怖いという気持ちが出てきてしまう。
ツールによる支援が得られにくいこともあり、C言語を使う人は増える方向にはならなさそうな気がする。

AI によるコードレビューが進化しているので、コードを書いている間の直接の支援はされなかったとしても
レビュー機能によって C言語でもメモリリークなんかが静的に見つけられたりすると
Rust 使わなくてもいいよ、みたいな時代が来るかもしれない！

などと意味が無いことを考えてないで Rust がんばろう。

## 9章

Rust は debug ビルドだとデフォルトで異常終了時にスタックトレースが出力される。  
golang も出力されていたと思うので最近はそういうものかもしれない。  
C言語だとデバッガ使わないと出てこないけど、Linux だと OS もあるしなんか仕込めた気がする。

* [普通のやつらの下を行け: C でバックトレース表示 - bkブログ](http://0xcc.net/blog/archives/000067.html)

Binary Hacks(Rebootedじゃない方)に同じことが書いてあったけど著者の一人であった。

### マッチガード

* `&` は参照にマッチしてその値を返す
* `ref` は値にマッチしてそれへの参照を返す

ここで `&` を使うと `&Err()` ではないのでマッチしない、ということかな。  
最後の `Err(error)` を `Err(ref error)` にしても問題はなかった。

最初の `File::open()` に属する `match` では `Err(error)` だけど、内側での `File::create()` に属する `match` では `Err(e)` になっているのは何か意味があるのだろうか？  
単に外側と内側で区別を付けたかっただけだろうか。  
まだこういう細かい違いを気にすべきなのかどうなのかが判断できない。
